{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/element-closest/index.mjs","webpack:///./node_modules/ie-array-find-polyfill/index.js","webpack:///./src/app.ts","webpack:///./utils/gdprLock.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","window","ElementPrototype","Element","matches","msMatchesSelector","mozMatchesSelector","webkitMatchesSelector","selector","elements","this","document","ownerDocument","querySelectorAll","index","Boolean","closest","element","nodeType","parentNode","Array","find","predicate","TypeError","obj","len","length","thisArg","arguments","iValue","removeChild","memoPurposeConsents","memoAdditionalVendorConsents","consentButtons","additionalVendorList","allPurposeConsents","consentVendor","vendorName","__cmp","activateVendor","undefined","location","reload","getVendorConsentsMemoized","cb","purposeConsents","slice","forEach","button","addEventListener","getAttribute","foundVendor","vendors","vendor","toLowerCase","querySelector","purposeIds","vendorIds","id","additionalVendorConsents","lockedIds","keys","vendorConsents","purposeFullfilled","purposeId","purposes","push","reduce","state","purpose","showLock","indexOf","map","res","consent","template","templateElement","htmlToElement","innerHTML","parentElement","insertBefore","loadAllScripts","dataExist","html","span","createElement","trim","runJs","scriptElement","head","getElementsByTagName","src","script","console","log","appendChild","eval","e","scripts","cleanUp","classList","contains","add","unblocked","remove","activateTemplate","nodeName","templates","style","visibility","height"],"mappings":"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","file":"app.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","function polyfill(window) {\n  var ElementPrototype = window.Element.prototype;\n\n  if (typeof ElementPrototype.matches !== 'function') {\n    ElementPrototype.matches = ElementPrototype.msMatchesSelector || ElementPrototype.mozMatchesSelector || ElementPrototype.webkitMatchesSelector || function matches(selector) {\n      var element = this;\n      var elements = (element.document || element.ownerDocument).querySelectorAll(selector);\n      var index = 0;\n\n      while (elements[index] && elements[index] !== element) {\n        ++index;\n      }\n\n      return Boolean(elements[index]);\n    };\n  }\n\n  if (typeof ElementPrototype.closest !== 'function') {\n    ElementPrototype.closest = function closest(selector) {\n      var element = this;\n\n      while (element && element.nodeType === 1) {\n        if (element.matches(selector)) {\n          return element;\n        }\n\n        element = element.parentNode;\n      }\n\n      return null;\n    };\n  }\n}\n\nexport default polyfill;\n//# sourceMappingURL=index.mjs.map\n","'use strict';\nif (!Array.prototype.find) {\n    Object.defineProperty(Array.prototype, 'find', {\n        value: function (predicate) {\n\n            if (this == null) {\n                throw new TypeError('this is null or not defined');\n            }\n\n            var obj = Object(this);\n            var len = obj.length >>> 0;\n\n            if (typeof predicate !== 'function') {\n                throw new TypeError('predicate must be a function');\n            }\n\n            var thisArg = arguments[1];\n\n            var index = 0;\n\n            while (index < len) {\n                var iValue = obj[index];\n                if (predicate.call(thisArg, iValue, index, obj)) {\n                    return iValue;\n                }\n                index++;\n            }\n\n            return undefined;\n        }\n    });\n}","import \"element-closest\";\r\nimport \"ie-array-find-polyfill\";\r\nimport {\r\n    activateVendor,\r\n    showLock,\r\n    htmlToElement,\r\n    loadAllScripts,\r\n} from \"../utils/gdprLock\";\r\n\r\ndeclare var window: any;\r\nif (!(\"__cmp\" in window)) {\r\n    window[\"__cmp\"] = () => {};\r\n}\r\n\r\n/**\r\n * Element.remove() polyfill for IE11.\r\n */\r\nif (!(\"remove\" in Element.prototype)) {\r\n    (Element.prototype[\"remove\"] as any) = function () {\r\n        if (this.parentNode) {\r\n            this.parentNode.removeChild(this);\r\n        }\r\n    };\r\n}\r\n\r\nconst consentButtons = document.querySelectorAll(\".blocked-content-container\");\r\nlet additionalVendorList: any[any] = [];\r\nconst allPurposeConsents = [1, 2, 3, 4, 5];\r\n\r\nfunction consentVendor(vendorName: string = \"\") {\r\n    if ((vendorName && vendorName !== \"inline-html\") || !window.__cmp) {\r\n        activateVendor(vendorName);\r\n    } else {\r\n        window.__cmp(\"acceptAll\", undefined, () => {\r\n            window.__cmp(\"acceptAllAdditional\", undefined, () => {\r\n                window.location.reload();\r\n            });\r\n        });\r\n    }\r\n}\r\n\r\nif (consentButtons.length) {\r\n    [].slice.call(consentButtons).forEach((button: HTMLElement) => {\r\n        button.addEventListener(\"click\", () => {\r\n            const vendorName = button.getAttribute(\r\n                \"data-vendor-name\"\r\n            ) as string;\r\n            /**\r\n             * In case the vendor list is empty we shall proceed as if we found the\r\n             * vendor because we assume Faktor is unreachable.\r\n             */\r\n            const foundVendor = additionalVendorList.vendors\r\n                ? additionalVendorList.vendors.find(\r\n                      (vendor: any) => vendor.name.toLowerCase() === vendorName\r\n                  )\r\n                : true;\r\n            if (!foundVendor) {\r\n                consentVendor(\"\");\r\n            } else {\r\n                const template = document.querySelector(\r\n                    `textarea[data-vendor-name=\"${vendorName}\"],template[data-vendor-name=\"${vendorName}\"],script[data-vendor-name=\"${vendorName}\"]`\r\n                ) as HTMLElement;\r\n                if (template) {\r\n                    if (window.__cmp) {\r\n                        window.__cmp(\"acceptAll\", {\r\n                            purposeIds: foundVendor.purposeIds,\r\n                        });\r\n                        window.__cmp(\"acceptAllAdditional\", {\r\n                            vendorIds: [foundVendor.id],\r\n                        });\r\n                        consentVendor(vendorName);\r\n                    } else {\r\n                        consentVendor(vendorName);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    });\r\n}\r\n\r\nlet memoPurposeConsents: any;\r\nfunction getVendorConsentsMemoized(cb: (purposeConsents: any) => void) {\r\n    if (memoPurposeConsents) {\r\n        cb(memoPurposeConsents);\r\n    } else {\r\n        window.__cmp(\"getVendorConsents\", undefined, (purposeConsents: any) => {\r\n            memoPurposeConsents = purposeConsents;\r\n            cb(memoPurposeConsents);\r\n        });\r\n    }\r\n}\r\n\r\nlet memoAdditionalVendorConsents: any;\r\nfunction getAdditionalVendorConsentsMemoized(\r\n    cb: (additionalVendorConsents: any) => void\r\n) {\r\n    if (memoAdditionalVendorConsents) {\r\n        cb(memoAdditionalVendorConsents);\r\n    } else {\r\n        window.__cmp(\r\n            \"getAdditionalVendorConsents\",\r\n            [],\r\n            (additionalVendorList: any) => {\r\n                memoAdditionalVendorConsents = additionalVendorList;\r\n                cb(memoAdditionalVendorConsents);\r\n            }\r\n        );\r\n    }\r\n}\r\n\r\nfunction clearMemoization() {\r\n    memoPurposeConsents = undefined;\r\n    memoAdditionalVendorConsents = undefined;\r\n}\r\n\r\nif (window.__cmp && !document.querySelector(\"html.cookiewall\")) {\r\n    const checkVendors = function () {\r\n        window.__cmp(\"getAdditionalVendorList\", null, function (vendors: any) {\r\n            additionalVendorList = vendors;\r\n            getAdditionalVendorConsentsMemoized(function (\r\n                additionalVendorConsents: any\r\n            ) {\r\n                const lockedIds: any[] = [];\r\n                Object.keys(additionalVendorConsents.vendorConsents).forEach(\r\n                    (key: any) => {\r\n                        if (\r\n                            additionalVendorList.vendors &&\r\n                            additionalVendorConsents.vendorConsents[key]\r\n                        ) {\r\n                            additionalVendorList.vendors.forEach(\r\n                                (vendor: any) => {\r\n                                    let purposeFullfilled: boolean[] = [];\r\n                                    vendor.purposeIds.forEach(\r\n                                        (purposeId: number) => {\r\n                                            getVendorConsentsMemoized(\r\n                                                (purposes: any) => {\r\n                                                    purposeFullfilled.push(\r\n                                                        purposes\r\n                                                            .purposeConsents[\r\n                                                            purposeId\r\n                                                        ]\r\n                                                    );\r\n                                                }\r\n                                            );\r\n                                        }\r\n                                    );\r\n                                    if (\r\n                                        vendor.id == key &&\r\n                                        purposeFullfilled.reduce(\r\n                                            (\r\n                                                state: boolean,\r\n                                                purpose: boolean\r\n                                            ) => state && purpose === true\r\n                                        )\r\n                                    ) {\r\n                                        activateVendor(\r\n                                            vendor.name.toLowerCase()\r\n                                        );\r\n                                    } else if (vendor.id == key) {\r\n                                        showLock(vendor.name.toLowerCase());\r\n                                    }\r\n                                }\r\n                            );\r\n                        } else if (\r\n                            additionalVendorConsents.vendorConsents[key] ===\r\n                            false\r\n                        ) {\r\n                            lockedIds.push(key);\r\n                        }\r\n                    }\r\n                );\r\n                additionalVendorList.vendors.forEach((vendor: any) => {\r\n                    if (lockedIds.indexOf(`${vendor.id}`) > -1) {\r\n                        showLock(vendor.name.toLowerCase());\r\n                    }\r\n                });\r\n            });\r\n        });\r\n    };\r\n\r\n    window.__cmp(\"addEventListener\", \"consentManagerClosed\", () => {\r\n        window.location.reload();\r\n    });\r\n\r\n    window.__cmp(\"addEventListener\", \"acceptAllButtonClicked\", () => {\r\n        window.location.reload();\r\n    });\r\n\r\n    getVendorConsentsMemoized((vendorConsents: any) => {\r\n        const consentAll = allPurposeConsents\r\n            .map((purposeId: number) => {\r\n                return vendorConsents.purposeConsents[purposeId];\r\n            })\r\n            .reduce((res: boolean, consent: boolean) => {\r\n                return res === consent && consent;\r\n            });\r\n\r\n        if (consentAll) {\r\n            activateVendor(\"inline-html\");\r\n        } else {\r\n            showLock(\"inline-html\");\r\n        }\r\n\r\n        const consentConvert = [1, 2, 4, 5]\r\n            .map((purposeId: number) => {\r\n                return vendorConsents.purposeConsents[purposeId];\r\n            })\r\n            .reduce((res: boolean, consent: boolean) => {\r\n                return res === consent && consent;\r\n            });\r\n\r\n        if (consentConvert) {\r\n            const template = document.querySelector(\r\n                `template[data-vendor-name=\"convert\"]`\r\n            ) as HTMLElement;\r\n            if (template) {\r\n                const templateElement = htmlToElement(\r\n                    template.innerHTML\r\n                ) as HTMLElement;\r\n                (template.parentElement as HTMLElement).insertBefore(\r\n                    templateElement,\r\n                    template\r\n                );\r\n                loadAllScripts(templateElement);\r\n            }\r\n        }\r\n\r\n        // If purpose 2 consent has been given.\r\n        if (vendorConsents.purposeConsents[2]) {\r\n            activateVendor(\"fdmg-personalized\");\r\n        } else {\r\n            showLock(\"fdmg-personalized\");\r\n        }\r\n    });\r\n\r\n    window.__cmp(\"addEventListener\", \"cmpReady\", function () {\r\n        checkVendors();\r\n        window.__cmp(\"addEventListener\", \"consentChanged\", () => {\r\n            clearMemoization();\r\n            window.__cmp(\r\n                \"consentDataExist\",\r\n                undefined,\r\n                (dataExist: boolean) => {\r\n                    if (dataExist) {\r\n                        window.__cmp(\"showConsentTool\", false);\r\n                    }\r\n                }\r\n            );\r\n        });\r\n    });\r\n\r\n    // const footerLink = document.querySelector(\r\n    //     '.menu-link[href=\"/cookiebeleid\"]'\r\n    // );\r\n    // if (footerLink) {\r\n    //     footerLink.addEventListener(\"click\", (e) => {\r\n    //         e.preventDefault();\r\n    //         window.__cmp(\"showConsentManager\", true);\r\n    //     });\r\n    // }\r\n}\r\n","export function htmlToElement(html: string) {\r\n    const span = document.createElement(\"span\");\r\n    span.innerHTML = html.trim();\r\n    return span;\r\n}\r\n\r\nexport function runJs(scriptElement: HTMLScriptElement) {\r\n    const head = document.getElementsByTagName(\"head\")[0];\r\n    if (scriptElement.src) {\r\n        const script = document.createElement(\"script\");\r\n        console.log(\"Load external script\", scriptElement);\r\n        script.src = scriptElement.src;\r\n        head.appendChild(script);\r\n    } else {\r\n        try {\r\n            console.log(\"Eval inline script\", scriptElement);\r\n            eval(scriptElement.innerHTML);\r\n        } catch (e) {\r\n            console.log(`Can't eval inline script`, scriptElement);\r\n        }\r\n    }\r\n}\r\n\r\nexport function loadAllScripts(templateElement: HTMLElement) {\r\n    const scripts = templateElement.querySelectorAll(\"script\");\r\n    if (scripts.length) {\r\n        console.log(\"Activate scripts\", scripts);\r\n        [].slice.call(scripts).forEach((script) => {\r\n            runJs(script);\r\n        });\r\n    }\r\n}\r\n\r\nexport function cleanUp(elements: HTMLElement[]) {\r\n    elements.forEach((element) => {\r\n        if (element.classList.contains(\"blocked-content-container\")) {\r\n            element.classList.add(\"hidden-cmp-content\");\r\n            element.addEventListener(\"animationend\", () => {\r\n                [].slice\r\n                    .call(\r\n                        document.querySelectorAll(\r\n                            \".unblocked.hidden-cmp-content\"\r\n                        )\r\n                    )\r\n                    .forEach((unblocked: HTMLElement) => {\r\n                        unblocked.classList.remove(\"hidden-cmp-content\");\r\n                    });\r\n                element.remove();\r\n            });\r\n        } else {\r\n            element.remove();\r\n        }\r\n    });\r\n}\r\n\r\nexport function activateTemplate(button: HTMLElement, template: HTMLElement) {\r\n    if (button) {\r\n        const templateElement = htmlToElement(\r\n            template.nodeName === \"TEXTAREA\"\r\n                ? (template as HTMLTextAreaElement).value\r\n                : template.innerHTML\r\n        ) as HTMLElement;\r\n        templateElement.classList.add(\"unblocked\");\r\n        templateElement.classList.add(\"hidden-cmp-content\");\r\n        templateElement.classList.add(\"inline-content\");\r\n        templateElement.classList.add(\"block\");\r\n        if (templateElement) {\r\n            (button.parentElement as HTMLElement).insertBefore(\r\n                templateElement,\r\n                button\r\n            );\r\n            loadAllScripts(templateElement);\r\n            cleanUp([button, template]);\r\n        }\r\n    }\r\n}\r\n\r\nexport function activateVendor(vendorName: string) {\r\n    console.log(\"activate vendor\", vendorName);\r\n    const templates: HTMLElement[] = [].slice.call(\r\n        document.querySelectorAll(\r\n            `textarea[data-vendor-name=\"${vendorName}\"],template[data-vendor-name=\"${vendorName}\"],script[data-vendor-name=\"${vendorName}\"]`\r\n        )\r\n    );\r\n    if (templates.length) {\r\n        templates.forEach((template) => {\r\n            activateTemplate(\r\n                template.closest(\r\n                    `.blocked-content-container[data-vendor-name=\"${vendorName}\"]`\r\n                ) as HTMLElement,\r\n                template\r\n            );\r\n        });\r\n    }\r\n}\r\n\r\nexport function showLock(vendorName: string) {\r\n    console.log(\"lock vendor\", vendorName);\r\n    const templates: HTMLElement[] = [].slice.call(\r\n        document.querySelectorAll(\r\n            `.blocked-content-container[data-vendor-name=\"${vendorName}\"]`\r\n        )\r\n    );\r\n    if (templates.length) {\r\n        templates.forEach((template) => {\r\n            template.style.visibility = \"visible\";\r\n            template.style.height = \"auto\";\r\n        });\r\n    }\r\n}\r\n"],"sourceRoot":""}